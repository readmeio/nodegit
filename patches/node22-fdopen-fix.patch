commit 372199564b031d87746365aad31f44d9a5d87418
Author: Bill Mill <bill@billmill.org>
Date:   Fri Oct 17 13:34:31 2025 -0400

    Fix fdopen macro conflicts with Node.js 22+ system headers

diff --git a/deps/zlib/zutil.h b/deps/zlib/zutil.h
index 902a304cc..7b4474d6b 100644
--- a/deps/zlib/zutil.h
+++ b/deps/zlib/zutil.h
@@ -142,11 +142,8 @@ extern z_const char * const z_errmsg[10]; /* indexed by 2-zlib_error */
 #  ifndef Z_SOLO
 #    if defined(__MWERKS__) && __dest_os != __be_os && __dest_os != __win32_os
 #      include <unix.h> /* for fdopen */
-#    else
-#      ifndef fdopen
-#        define fdopen(fd,mode) NULL /* No fdopen() */
-#      endif
 #    endif
+#    /* Don't redefine fdopen on macOS - system headers already provide it */
 #  endif
 #endif
 
@@ -171,12 +168,14 @@ extern z_const char * const z_errmsg[10]; /* indexed by 2-zlib_error */
 #endif
 
 #if defined(_BEOS_) || defined(RISCOS)
-#  define fdopen(fd,mode) NULL /* No fdopen() */
+/* Don't redefine fdopen - may conflict with system headers */
+/* #  define fdopen(fd,mode) NULL */
 #endif
 
 #if (defined(_MSC_VER) && (_MSC_VER > 600)) && !defined __INTERIX
 #  if defined(_WIN32_WCE)
-#    define fdopen(fd,mode) NULL /* No fdopen() */
+/* Don't redefine fdopen on WinCE - may conflict with system headers */
+/* #    define fdopen(fd,mode) NULL */
 #  else
 #    define fdopen(fd,type)  _fdopen(fd,type)
 #  endif
